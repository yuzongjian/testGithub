<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<title>添加门店</title>
	<link rel="stylesheet" type="text/css" href="../iconfont/iconfont.css" />
	<link rel="stylesheet" type="text/css" href="../layui/css/layui.css" />
	<link rel="stylesheet" type="text/css" href="../css/global.css" />
	<style type="text/css">
		/**
		 * 门店地址
		 */
		.layui-input-inline.store-address {
			width: 1rem;
		}
		.layui-input-block.detail-store-address {
			width: 3.2rem;
		}
	</style>
	<!-- 百度地图API -->
	<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=M9WS9iHCpcL4ZjIXUPZ07eiRPbOrFNbE"></script>
</head>
<body class="layui-layout-body">
	<div class="layui-layout layui-layout-admin">
		<div class="layui-header nav-header">
            <div class="layui-logo nav-logo">
            	商户管理后台
            	<i class="iconfont" id="nav_slide_btn">&#xe61c;</i>
            </div>
            <ul class="layui-nav layui-layout-right">
                <li class="layui-nav-item">
                    <a href="merchantInfo.html" class="nav-a">
                        <i class="iconfont">&#xe625;</i>
                        商户
                    </a>
                </li>
                <li class="layui-nav-item">
                    <a href="merchantAuthentication.html" class="nav-a">
                        <i class="iconfont un-approve-icon">&#xe64c;</i>
                        未认证：请实名认证
                    </a>
                </li>
                <li class="layui-nav-item"><a href="login.html" class="nav-a" id="nav_log_out">退出登录</a></li>
            </ul>
        </div>

        <div class="layui-side layui-bg-black" id="left_nav">
            <div class="layui-side-scroll">
                <ul class="layui-nav layui-nav-tree"  lay-filter="test">
                    <li class="layui-nav-item layui-nav-itemed">
                        <a class="" href="javascript:;">营业概况</a>
                        <dl class="layui-nav-child">
                            <dd><a href="statisticsData.html">数据统计</a></dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item layui-nav-itemed">
                        <a href="javascript:;">交易记录</a>
                        <dl class="layui-nav-child">
                            <dd><a href="tradeDetails.html">交易明细</a></dd>
                            <dd><a href="tradeAll.html">交易汇总</a></dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item layui-nav-itemed">
                        <a href="javascript:;">门店管理</a>
                        <dl class="layui-nav-child">
                            <dd class="layui-this"><a href="addStore.html">添加门店</a></dd>
                            <dd><a href="storeList.html">门店列表</a></dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item layui-nav-itemed">
                        <a href="javascript:;">商户信息</a>
                        <dl class="layui-nav-child">
                            <dd><a href="merchantInfo.html">基本信息</a></dd>
                            <dd><a href="changePassword.html">修改密码</a></dd>
                            <dd><a href="merchantAuthentication.html">商户认证</a></dd>
                        </dl>
                    </li>
                </ul>
            </div>
        </div>

		<div class="layui-body" id="content_body">
			<!-- 面包屑 -->
			<span class="layui-breadcrumb head-breadcrumb">
				<i class="iconfont">&#xe61a;</i>
				<a href="statisticsData.html">首页</a>
				<a href="addStore.html">门店管理</a>
				<a><cite>添加门店</cite></a>
			</span>
			<!-- 内容主体区域 -->
			<div style="padding: 15px;">
				<fieldset class="layui-elem-field layui-field-title">
					<legend>添加门店</legend>
					<div class="layui-field-box">
						<form class="layui-form">
							<!-- 门店名称 -->
							<div class="layui-form-item">
								<label class="layui-form-label">门店名称</label>
								<div class="layui-input-inline">
									<input type="text" lay-verify="required" placeholder="请输入门店名称" autocomplete="off" class="layui-input" name="storeName">
								</div>
							</div>

							<!-- 联系人 -->
							<div class="layui-form-item">
								<label class="layui-form-label">联系人</label>
								<div class="layui-input-inline">
									<input type="text" lay-verify="required" placeholder="请输入联系人姓名" autocomplete="off" class="layui-input" name="person">
								</div>
							</div>

							<!-- 联系方式 -->
							<div class="layui-form-item">
								<label class="layui-form-label">联系方式</label>
								<div class="layui-input-inline">
									<input type="text" lay-verify="required|phone" placeholder="请输入联系方式" autocomplete="off" class="layui-input" name="phone">
								</div>
							</div>

							<!-- 行业 -->
							<div class="layui-form-item">
								<label class="layui-form-label">行业</label>
								<div class="layui-input-inline">
									<select name="industry1" lay-verify="required" lay-search>
										<option value="">请选择行业</option>
										<option value="010">餐饮</option>
										<option value="021">服务</option>
										<option value="0571">公益</option>
									</select>
								</div>
								<div class="layui-input-inline">
									<select name="industry2" lay-verify="" lay-search>
										<option value="">请选择行业</option>
										<option value="010">餐饮</option>
										<option value="021">服务</option>
										<option value="0571">公益</option>
									</select>
								</div>	
							</div>

							<!-- 门店地址 -->
							<div class="layui-form-item">
								<label class="layui-form-label">门店地址</label>
								<div class="layui-input-inline store-address">
									<select name="province" lay-filter="province" id="province" lay-verify="required" lay-search>
										<option value="">省</option>
									</select>
								</div>
								<div class="layui-input-inline store-address">
									<select name="city" lay-filter="city" lay-verify="required" id="city" lay-search>
										<option value="">市</option>
									</select>
								</div>
								<div class="layui-input-inline store-address">
									<select name="area" lay-filter="area" lay-verify="required" id="area" lay-search>
										<option value="">区</option>
									</select>
								</div>
							</div>
							<div class="layui-form-item">
								<div class="layui-input-block detail-store-address">
									<input type="text" lay-verify="required" placeholder="请输入详细地址" autocomplete="off" class="layui-input" name="address" id="store_details_address">
								</div>
							</div>

							<!-- 门店坐标 -->
							<div class="layui-form-item">
								<label class="layui-form-label">门店坐标</label>
								<div class="layui-input-inline">
									<input type="text" lay-verify="required" placeholder="请输入门店坐标" autocomplete="off" class="layui-input" name="location" id="lat_lng">
								</div>
								<a href="javascript:;" class="layui-btn layui-btn-normal" id="location_btn">定位</a>
							</div>

							<!-- 是否营业 -->
							<div class="layui-form-item">
								<label class="layui-form-label">是否营业</label>
								<div class="layui-input-block">
									<input type="checkbox" lay-skin="switch" lay-text="ON|OFF" checked name="switch" lay-filter="isOnSale">
								</div>
							</div>

							<!-- 添加 -->
							<div class="layui-input-block">
								<button class="layui-btn layui-btn-normal" lay-filter="submit-btn" lay-submit>添加</button>
							</div>
						</form>
					</div>
				</fieldset>
			</div>
		</div>

	</div>
	<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
	<script type="text/javascript" src="../js/nav.js"></script>
	<script src="http://mockjs.com/dist/mock.js"></script>
	<script src="../layui/layui.js"></script>
	<script type="text/javascript" src="../js/area.js"></script>
	<script type="text/javascript" src="../js/province.js"></script>
	<script type="text/javascript" src="../js/location.js"></script>
	<script>

		Mock.mock(/\.json/, 'post', {
			code: 0,
			msg: "",
			count: 1,//返回的数据总数
			data: {
				status: 1//添加成功/失败的返回值
			}
		});

		var form,
			$;
		layui.use(['element','form','layer'], function(){
			var layer = layui.layer;
				form = layui.form;
				$ = layui.$;

			//省市区三级联动
			loadProvince(form);

			//监听提交按钮
			form.on('submit(submit-btn)',function(data) {
				//获取当前容器的全部表单字段，名值对形式：{name: value}
				var form_data = data.field;
				if (!form_data.switch) {
					//switch开关为OFF
					form_data.switch = 0;
				} else {
					//switch开关为ON
					form_data.switch = 1;
				}
				//console.log(form_data);

				$.ajax({
					url:'test.json',
					type: 'POST',
					data: form_data,
					dataType: 'JSON',
					//cache: false,//不缓存该页面
					success: function(data) {
						var mes = '<p>门店名：' + form_data.storeName + '</p><p>联系人：' + form_data.person + '</p><p>联系方式：' + form_data.phone + '</p>';
						if (data.data.status == 1) {
							layer.alert(mes, {icon: 1,title: '添加成功',shadeClose: true});
							//添加成功以后清空表单
							$('form')[0].reset();
						} else {
							layer.msg('添加失败 请稍后重试',{
								icon: 5,
								time: 3000,//3s后自动关闭
								shift: 6//抖动效果
							});
							return false;
						}
					},
					error: function() {
						layer.msg('请求失败 请稍后重试',{
							icon: 5,
							time: 3000,//3s后自动关闭
							shift: 6//抖动效果
						});
					}
				})
				return false;
			})
		});	
	</script>
</body>
</html>